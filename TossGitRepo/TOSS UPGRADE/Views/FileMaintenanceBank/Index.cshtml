@model TOSS_UPGRADE.Models.FM_AccountableForm.FM_AccountableForm
@using TOSS_UPGRADE.Models;
@{
    DB_TOSSEntities CEE = new DB_TOSSEntities();
}
@{
    ViewBag.Title = "Bank";
}
<script>
    $("#fmBank").addClass("active");
</script>

<div class="content-header row">
    <div class="content-header-left col-md-6 mb-2">
        <h3 class="content-header-title black"><b>File Maintenance - Bank</b></h3>
    </div>
</div>

<div class="card-content" id="FMBankController" ng-controller="FMBankController" ng-init="InitAllFunction();">
    <div class="card">
        <ul class="nav nav-tabs bg-headerbc nav-underline">
            <li class="nav-item">
                <a class="nav-link active" id="base-tab1" data-toggle="pill" aria-controls="tab1" href="#tab1" aria-expanded="true"><b>Bank</b></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="base-tab2" data-toggle="tab" aria-controls="tab2" href="#tab2" aria-expanded="false"><b>Account Type</b></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="base-tab3" data-toggle="tab" aria-controls="tab3" href="#tab3" aria-expanded="false"><b>Bank Accounts</b></a>
            </li>
        </ul>
        <div class="tab-content px-1 pt-1">
            @* Bank *@
            <div role="tabpanel" class="tab-pane active" id="tab1" aria-expanded="true" aria-labelledby="base-tab1">
                <div class="content-body">
                    <div id="_BankID"></div>
                    <div class="row mt-1" id="_BankTableID">
                    </div>
                </div>
            </div>
            @* Account Type *@
            <div role="tabpanel" class="tab-pane" id="tab2" aria-expanded="true" aria-labelledby="base-tab2">
                <div class="content-body">
                    <div class="row">
                        <div class="col-md-2"></div>
                        <div class="col-md-8" id="_AccountTypeID">
                            
                        </div>
                    </div>
                    <div class="row mt-1">
                        <div class="col-md-2"></div>
                        <div class="col-md-8" id="AccountTypeTableID">
                         
                        </div>
                    </div>
                </div>
            </div>
            @* Bank Accounts *@
            <div role="tabpanel" class="tab-pane" id="tab3" aria-expanded="true" aria-labelledby="base-tab3">
                <div class="content-body">
                    <div class="row">
                        <div class="col-md-4 pr-0 form-group black">
                            <div id="_BankAccountBankID">

                            </div>
                        </div>
                        <div class="col-md-2 pr-0 form-group black">
                            <label><b>Account Number</b></label>
                            <input type="text" class="form-control black" value="" />
                        </div>
                        <div class="col-md-3 form-group black">
                            <label><b>Account Name</b></label>
                            <input type="text" class="form-control black" value="" />
                        </div>
                        <div class="col-md-3 pl-0 form-group black">
                            <label><b>Fund Type</b></label>
                                <select class="form-control">
                                    <option>Special Education Fund</option>
                                    <option>General Fund</option>
                                    <option>Trust Fund</option>
                                </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-5 form-group black">
                            <label><b>General Ledger Account</b></label>
                                <select class="form-control">
                                    <option>Cash in Bank - Local Currency,Current Account</option>
                                    <option>Cash in Bank - Local Currency,Savings Account</option>
                                </select>
                        </div>
                        <div class="col-md-2 px-0 form-group black">
                            <label><b>Code</b></label>
                            <input type="text" class="form-control" value="1-01-02-010" disabled />
                        </div>
                        <div class="col-md-5 form-group black">
                            <label><b>Account Type</b></label>
                                <select class="form-control">
                                    <option>Joint Technical and Credit Assistance Program</option>
                                    <option>Community Development Fund</option>
                                    <option>Regular Savings Account</option>
                                </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8"></div>
                        <div class="col-md-2 pl-0">
                            <button class="btn bg-addbutton form-control black"><b>Add</b></button>
                        </div>
                        <div class="col-md-2 pl-0">
                            <button class="btn bg-headerbc form-control white"><b>Cancel</b></button>
                        </div>
                    </div>
                    <div class="row mt-1" @*id="DepartmentTableID"*@>
                        <div class="col-md-12">
                            <table class="table table-striped table-responsive zero-configuration table-bordered text-center table-smss-hover no-footer m-0 w-100">
                                <thead class="text-center">
                                    <tr>
                                        <th><b>Bank Name</b></th>
                                        <th><b>Account Number</b></th>
                                        <th><b>Account Name</b></th>
                                        <th><b>General Ledger Account</b></th>
                                        <th><b>Code</b></th>
                                        <th><b>Account Type</b></th>
                                        <th><b>Fund</b></th>
                                        <th><b>Action</b></th>
                                    </tr>
                                </thead>
                                <tbody class="text-center">
                                    <tr>
                                        <td>Development Bank of the Philippines</td>
                                        <td>012345678912</td>
                                        <td>Regular Account</td>
                                        <td>Cash in Bank - Local Currency, Current Account</td>
                                        <td>1-01-02-010</td>
                                        <td>Regular Savings Account</td>
                                        <td>General Fund</td>
                                        <td><button type="button" class="btn btn-sm btn-icon center bg-headerbc" onfocusout="ClosePopOver1()" data-toggle="popoverSignatories" data-placement="left" data-conztainer="body" data-original-title=""> <i class="la la-reorder"></i></button></td>
                                    </tr>
                                    <tr>
                                        <td>Rizal Commercial Banking Corporation</td>
                                        <td>013265498721</td>
                                        <td>Sanguiniang Panlungsod</td>
                                        <td>Cash in Bank - Local Currency, Savings Account</td>
                                        <td>1-01-02-020</td>
                                        <td>Regular Savings Account</td>
                                        <td>General Fund</td>
                                        <td><button type="button" class="btn btn-sm btn-icon center bg-headerbc" onfocusout="ClosePopOver1()" data-toggle="popoverSignatories" data-placement="left" data-conztainer="body" data-original-title=""> <i class="la la-reorder"></i></button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    @*Angular Function*@
    app.controller('FMBankController', function ($scope, $http, $sce) {
        var F = $scope, P = $http, D = $sce.trustAsHtml;

        F.InitAllFunction = function () {
            //Bank Table
            F.Get_BankTable();

            //Account Type
            F.Get_AccountTypeTable();

            F.LoadDynamicDDBank();
        }

        //Bank Name
        F.Get_BankTable = function () {
            P({
                url: '/FileMaintenanceBank/Get_BankTable',
            }).then(function (response) {
                $("#_BankTableID").html(response.data);
            });
            F.Get_AddBank();
        }
        F.Get_AddBank = function () {
            P({
                url: '/FileMaintenanceBank/Get_AddBankName',
            }).then(function (response) {
                $("#_BankID").html(response.data);
            });
        }
        F.Get_UpdateBank = function (BankID) {
            P({
                url: '/FileMaintenanceBank/Get_UpdateBankName',
                params: { BankID: BankID }
            }).then(function (response) {
                $("#_BankID").html(response.data);
            });
        }
        F.Get_DeleteBank = function (BankID) {
            P({
                url: '/FileMaintenanceBank/DeleteBankName',
                params: { BankID: BankID }
            }).then(function (response) {
                F.Get_BankTable();
            });
        }

        //Account Type

        F.Get_AccountTypeTable = function () {
            P({
                url: '/FileMaintenanceBank/Get_AccountTypeTable',
            }).then(function (response) {
                $("#AccountTypeTableID").html(response.data);
            });
            F.Get_AddAccountType();
        }
        F.Get_AddAccountType = function () {
            P({
                url: '/FileMaintenanceBank/Get_AddAccountType',
            }).then(function (response) {
                $("#_AccountTypeID").html(response.data);
            });
        }
        F.Get_UpdateAccountType = function (AccountTypeID) {
            P({
                url: '/FileMaintenanceBank/Get_UpdateAccountType',
                params: { AccountTypeID: AccountTypeID }
            }).then(function (response) {
                $("#_AccountTypeID").html(response.data);
            });
        }
        F.Get_DeleteAccountType = function (AccountTypeID) {
            P({
                url: '/FileMaintenanceBank/DeleteAccountType',
                params: { AccountTypeID: AccountTypeID }
            }).then(function (response) {
                F.Get_AccountTypeTable();
            });
        }

        //Bank Account

        F.LoadDynamicDDBank = function () {
            P({
                url: '/FileMaintenanceBank/GetDynamicBank',
            }).then(function (response) {
                $("#_BankAccountBankID").html(response.data);
            });
        }
        });
</script>